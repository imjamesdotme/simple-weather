$(document).ready(function(){function e(){$("#loading").show(),$("#wrapper").hide(),"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(e){p+=e.coords.latitude,l+=e.coords.longitude;var t=i+p+"&"+l+s+u;o(t)}):($("#overlay").slideDown(300),$("#error").text("Your brower may not support geolocation."))}function t(){var e=$("input").val().toLowerCase(),t=i+"q="+e+s+u;o(t),$("input").val("")}function o(e){$.getJSON(e).done(function(e){var t=e;r(t),$("#loading").hide(),$("#wrapper").show()}).fail(function(){$("#overlay").slideDown(300),$("#error").text("Sorry it looks like somethings gone wrong.")})}function r(e){m=e.name,d=e.sys.country,c=e.weather[0].description,h=e.main.temp,g=e.main.temp_max,w=e.main.temp_min,f=e.weather[0].id,v="wi wi-owm-"+f,y=Math.round(e.wind.speed),C=n(e.sys.sunrise),x=n(e.sys.sunset),$("i, #temperature, #temp-high, #temp-low").removeClass(),$("#location").text(m),$("#country").text(d),$("#description").text(c),$("#temperature").html(h+"<sup>&deg; C</sup>"),$("#temp-high").html(g+"<sup>&deg; C</sup>"),$("#temp-low").html(w+"<sup>&deg; C</sup>"),$("#wind-speed").text(y+"mph"),$("#sunrise").text(C),$("#sunset").text(x),$("i#weather-icon").addClass(v);var t="";h>25?t+="very-warm":h>=20?t+="warm":h>=12?t+="mild":h>=0?t+="cold":0>h&&(t+="very-cold"),$("i, #temperature, #temp-high, #temp-low").addClass(t)}function n(e){var t=e,o=new Date(1e3*t),r=o.toLocaleTimeString();return r}function a(){var e=$("#temperature").attr("data-unit");if("celsius"===e){var t=Math.floor(1.8*h+32),o=Math.floor(1.8*g+32),r=Math.floor(1.8*w+32);$("#temperature").html(t+"<sup>&deg; F</sup>"),$("#temperature").attr("data-unit","fahrenheit"),$("#temp-high").html(o+"<sup>&deg; F</sup>"),$("#temp-low").html(r+"<sup>&deg; F</sup>")}else $("#temperature").html(h+"<sup>&deg; C</sup>"),$("#temperature").attr("data-unit","celsius"),$("#temp-high").html(g+"<sup>&deg; C</sup>"),$("#temp-low").html(w+"<sup>&deg; C</sup>")}var i="//api.openweathermap.org/data/2.5/weather?",u="&APPID=9fe60a1181a81b69ab73113b9a1de41d",s="&units=metric",p="lat=",l="lon=",m,d,c,h,g,w,f,v,y,C,x;$("#submit").on("click",function(e){e.preventDefault(),t()}),$("#current-position").on("click",function(t){t.preventDefault(),e()}),$("#temperature, #temp-high, #temp-low").on("click",function(){a()}),$("#close").on("click",function(){$("#overlay").slideUp(300)})});